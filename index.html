<!doctype>
<html>
    <head>
        <meta charset="UTF-8">
        <title>wasm benchmark</title>
    </head>
    <body>
        <ol>
            <li><button onclick='load("b1")'>empty code</button></li>
            <li><button onclick='load("b2")'>wasm alert("hello wasm")</button></li>
        </ol>
    </body>
    <script>
        wasm = 0;
        function dlog(x) {
            if (typeof x == "string") document.body.append('"' + x + '"'); else
            document.body.append((typeof x) + ': ' + Object.keys(x).toString());
            document.body.appendChild(document.createElement('br'));
        }
        function tlog(start, pre='') {
            dlog(pre + (
                (new Date()).getTime() - start.getTime()).toString() + 'ms');
        }
        function load(x) {
            let start = new Date();
            let mod = import('./bin/' + x + '.js');
            mod.then(r => {
                wasm_bindgen('./bin/' + x + '_bg.wasm').then(r2 => {
                    tlog(start, 'took: ');
                });
            });
        }
    </script>
</html>
